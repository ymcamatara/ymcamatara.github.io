# **FEATURE UPGRADE: Simple Media Modal (Lightbox)**

## **1\. Goal**

Implement a simple, high-performance "Modal" viewer for all images and videos in the programme gallery. Clicking any thumbnail must open the media in a full-screen, aspect-ratio-friendly overlay.

## **2\. Viewer UI & Logic (HTML/CSS)**

* **The Overlay:** Add a fixed div (\#viewerOverlay) with a dark background (rgba(0,0,0,0.95)) that is hidden by default.  
* **Media Handling:** \- Images and Videos must use object-fit: contain to preserve their original aspect ratio.  
  * Media should fill up to 95% of the viewport width/height.  
* **Controls:**  
  * A large, circular "Close (Ã—)" button in the top-right corner.  
  * Clicking the black background area should also close the viewer.  
* **Mobile optimization:** Ensure touch-action: pinch-zoom is enabled for the overlay to allow native mobile zooming on images.

## **3\. Python Script Requirements (build\_site.py)**

Update the build\_site.py templates to:

* **Gallery Rendering:** \- Wrap every image in an onclick="openImageViewer(this.src)".  
  * Wrap every video in an onclick="openVideoViewer(this.src)".  
* **Injection:** Ensure the CSS for the modal and the JavaScript functions (openImageViewer, openVideoViewer, closeViewer) are included in the generated index.html for every programme.

## **4\. JavaScript Requirements**

Write a simple script to:

* openImageViewer(src): Show the overlay, insert an \<img\> tag with the source, and disable body scrolling.  
* openVideoViewer(src): Show the overlay, insert a \<video\> tag with controls and autoplay, and disable body scrolling.  
* closeViewer(): Hide the overlay, clear the inner HTML (to stop video playback/clear memory), and re-enable body scrolling.  
* **Keyboard Support:** Close the viewer when the Escape key is pressed.

## **5\. Visual Consistency**

* Thumbnails in the gallery should be square (aspect-ratio: 1/1) with object-fit: cover to look organized.  
* The full-screen media must **never** be cropped; it must show the full frame.